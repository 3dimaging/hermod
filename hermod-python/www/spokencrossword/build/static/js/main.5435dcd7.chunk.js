(this.webpackJsonpspokencrossword=this.webpackJsonpspokencrossword||[]).push([[0],{160:function(e,t,n){},161:function(e,t,n){},237:function(e,t){e.exports=function(e){var t;onmessage=function(e){switch(e.data.command){case"init":o=e.data.inputSampleRate,t=o;break;case"process":!function(e){for(var o=0;o<e.length;o++)n.push(32767*e[o]);for(;16e3*n.length/t>512;){for(var a=new Int16Array(512),r=0,i=0,s=0,c=0;s<512;){for(r=0,i=0;c<Math.min(n.length,(s+1)*t/16e3);)r+=n[c],i++,c++;a[s]=r/i,s++}postMessage(a),n=n.slice(c)}}(e.data.inputFrame);break;case"reset":n=[]}var o};var n=[]}},241:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},247:function(e,t,n){e.exports=n.p+"static/media/waiting_small.d362cb3f.gif"},253:function(e,t,n){e.exports=n(613)},483:function(e,t,n){(function(t){var o=n(486),a=n(489),r=n(491),i=n(579);var s=function(e){var s=n(608),c=n(612);try{window.PorcupineManager=s}catch(V){}var l=null,u=!1,m=!1,h=!1,d={},p={},g=!1,f=!1,v=window.AudioContext||window.webkitAudioContext,b=null,y=null,w=null,E=null,S=null,O=null,k=!1,C=[],M=null,P=null,j=[],A=new Float32Array([.9]),x={"hermod/+/speaker/cache/+":function(e,t,n){j.push(n)},"hermod/+/speaker/play/+":function(e,t,n){console.log(["speaker play",t,n]);var a,r=e.split("/"),i="no_id";if(r.length>4&&(i=r[4]),t&&t.length>0){var s={};try{s=JSON.parse(n)}catch(V){}s&&s.url?(p.hasOwnProperty("startPlaying")&&p.startPlaying(),(a=s.url,console.log("PLAY url "+a),h=!0,new Promise((function(e,t){(S=new Audio(a)).addEventListener("canplaythrough",(function(e){S.play()})),S.addEventListener("ended",(function(t){h=!1,e()})),S.addEventListener("error",(function(t){h=!1,e()}))}))).then((function(){l.publish("hermod/"+t+"/speaker/finished",JSON.stringify({id:i})),p.hasOwnProperty("stopPlaying")&&p.stopPlaying()}))):(l.publish("hermod/"+t+"/speaker/started",JSON.stringify({id:i})),p.hasOwnProperty("startPlaying")&&p.startPlaying(),j.push(n),q(function(e){var t=e.reduce((function(e,t){return e+t.length}),0);if(!e.length)return null;var n,a=new Uint8Array(t),r=0,i=o(e);try{for(i.s();!(n=i.n()).done;){var s=n.value;a.set(s,r),r+=s.length}}catch(c){i.e(c)}finally{i.f()}return a}(j)).then((function(){j=[],l.publish("hermod/"+t+"/speaker/finished",JSON.stringify({id:i})),p.hasOwnProperty("stopPlaying")&&p.stopPlaying()})))}},"hermod/+/nlu/intent":function(e,t,n){var o,a,r=JSON.parse(n);if(r&&r.intent&&r.intent.name){var i=r.intent.name,s=[];if(r.entities){for(var c in r.entities)s.push(r.entities[c].entity);s.length>0&&(i+="::"+s.join("__"))}o=i,a=t,console.log(["LOG ANLYT",o,a])}},"hermod/+/tts/say":function(e,t,n){p.hasOwnProperty("startSpeaking")&&p.startSpeaking()},"hermod/+/tts/finished":function(e,t,n){p.hasOwnProperty("stopSpeaking")&&p.stopSpeaking()},"hermod/+/speaker/volume":function(e,t,n){var o={};try{(o=JSON.parse(n)).volume&&D(o.volume)}catch(V){}},"hermod/+/asr/start":function(e,t,n){B(),H()},"hermod/+/asr/stop":function(e,t,n){J(),F()},"hermod/+/hotword/start":function(e,t,n){L()},"hermod/+/hotword/stop":function(e,t,n){Y()},"hermod/+/ready":function(e,t,n){console.log("reload on server restart"),T(t)}};function N(e,t){if(console.log(["MESSAGE ",e,t]),d.hasOwnProperty(e))l.unsubscribe(e),d[e](e,t),delete d[e];else{var n=e.split("/");(n.length>4&&"speaker"===n[2]&&"play"===n[3]||n.length>4&&"speaker"===n[2]&&"cache"===n[3]||n.length>4&&"speaker"===n[2]&&"stream_mp3"===n[3]||n.length>4&&"speaker"===n[2]&&"stream_wav"===n[3])&&(n[4]="+");var o=n[1];n[1]="+";var a=n.join("/");x.hasOwnProperty(a)&&x[a](e,o,t)}p.hasOwnProperty("message")&&p.message(e,t)}function T(e){R("hermod/"+e+"/dialog/init",{platform:"web",url:window.location.origin,supports:["audio","display"]})}function I(){return new Promise((function(t,n){var o={clientId:e.username,protocolId:"MQTT",protocolVersion:4,clean:!1,username:e.username,password:e.password,rejectUnauthorized:!1},a="ws://";"https:"==window.location.protocol&&(a="wss://");var i=null;i=e.server?e.server:a+window.location.hostname+":9001",(l=r.connect(i,o)).on("connect",(function(){console.log("connected"),console.log(e),e.subscribe&&e.subscribe.length>0?l.subscribe("hermod/rasa/ready",(function(n){l.unsubscribe(e.subscribe,(function(n){n&&console.log(["unSUBSCRIBE ERROR",n]),l.subscribe(e.subscribe,(function(n){n&&console.log(["SUBSCRIBE ERROR",n]),console.log(["init subscribed to "+e.subscribe]),R("hermod/"+e.site+"/asr/activate",{}),p.hasOwnProperty("connect")&&p.connect(),T(e.site),t()}))}))})):(T(e.site),p.hasOwnProperty("connect")&&p.connect(),t())})),l.on("error",(function(e){console.log("error"),console.log(e),p.hasOwnProperty("disconnect")&&p.disconnect()})),l.on("disconnect",(function(e){console.log("disconnect"),console.log(e),p.hasOwnProperty("disconnect")&&p.disconnect()})),l.on("reconnect",(function(e){console.log("reconnect"),p.hasOwnProperty("reconnect")&&p.reconnect()})),l.on("message",N)}))}function R(e,t){l.publish(e,JSON.stringify(t))}function U(e,t){l.publish(e,t)}function W(e,t,n){return new Promise((function(o,a){l.subscribe(n),d[n]=function(){o()},l.publish(e,JSON.stringify(t))}))}function D(e){E&&E.gain&&(E.gain.value=e/100)}function B(){E&&E.gain&&(P=E.gain.value,E.gain.value=.05)}function F(){null!=P&&E&&E.gain&&(E.gain.value=P,P=E.gain.value)}function L(){if(p.hasOwnProperty("hotwordStart")&&p.hotwordStart(),f=!0,!g){var t=!1;console.log(e.javascript_environment),console.log(e),"react"===e.javascript_environment&&(t=!0),s("./porcupine/porcupine_worker.js",t).start(c,A,(function(t){t&&f&&(R("hermod/"+e.site+"/hotword/detected",{}),p.hasOwnProperty("hotwordDetected")&&p.hotwordDetected(t))}),(function(e){console.log(e)})),console.log("HOW STARYTED"),g=!0}}function Y(){p.hasOwnProperty("hotwordStop")&&p.hotwordStop(),f=!1}function G(){console.log("bind speaking"),navigator.getUserMedia||(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia);try{navigator.getUserMedia?navigator.getUserMedia({audio:!0},(function(t){console.log("bind speaking have audoi");var n=a(t,{});n.on("speaking",(function(){clearTimeout(O),console.log("speaking"),function(e){for(var t in console.log(["SEND BUFFER"]),C)U("hermod/"+e+"/microphone/audio",C[t]);C=[]}(e.site),k=!0,p.hasOwnProperty("speaking")&&p.speaking()})),n.on("stopped_speaking",(function(){O=setTimeout((function(){clearTimeout(O),k=!1,p.hasOwnProperty("stopspeaking")&&p.stopspeaking()}),3e3)}))}),(function(e){console.log(["MIC Error capturing audio.",e])})):console.log("MIC getUserMedia not supported in this browser.")}catch(V){console.log(V)}}function H(){m=!0,B(),p.hasOwnProperty("microphoneStart")&&p.microphoneStart()}function _(e,n){for(var o="default",a={},r=0;r!==e.length;++r){var i=e[r];"audioinput"===i.kind&&(console.log(i.label),console.log(i.deviceId),a[i.label]=i.deviceId,i.label&&-1!==i.label.toLowerCase().indexOf("speakerphone")&&(o=i.deviceId)),a.FINAL=o}!function(e,n){if(u)return;u=!0,navigator.getUserMedia||(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia);try{navigator.getUserMedia?navigator.getUserMedia({audio:!0},(function(n){b=new v,(y=b.createGain()).gain.value=1;var o=b.createMediaStreamSource(n);function a(e){if(e){for(var t=e.length,n=new Int16Array(t);t--;)n[t]=32767*Math.min(1,e[t]);return n.buffer}}var r=b.createScriptProcessor(4096,1,1);r.onaudioprocess=function(n){u&&m&&function(e,t,n){for(var o=new OfflineAudioContext(e.numberOfChannels,e.duration*e.numberOfChannels*t,t),a=o.createBuffer(e.numberOfChannels,e.length,e.sampleRate),r=0;r<e.numberOfChannels;r++)a.copyToChannel(e.getChannelData(r),r);var i=o.createBufferSource();i.buffer=e,i.connect(o.destination),i.start(0),o.oncomplete=function(e){var t=e.renderedBuffer.getChannelData(0);n(t)},o.startRendering()}(n.inputBuffer,16e3,(function(n){var o;h?console.log("BAN DURING PLAY"):k?U("hermod/"+e+"/microphone/audio",t.from(a(n))):(setTimeout((function(){J(),L()}),5e3),o=t.from(a(n)),C.push(o),C.length>30&&C.shift())}))},y.connect(r),o.connect(y),r.connect(b.destination)}),(function(e){console.log(["dMIC Error capturing audio.",e])})):console.log("MIC getUserMedia not supported in this browser.")}catch(V){console.log(V)}}(n)}function z(e){console.log("navigator.MediaDevices.getUserMedia error: ",e.message,e.name)}function q(e,t){return t||(t=0),h=!0,new Promise((function(t,n){try{if(e){var o=new Uint8Array(e.length);o.set(new Uint8Array(e),0),w=new v,(E=w.createGain()).gain.value=1,w.decodeAudioData(o.buffer,(function(e){(M=w.createBufferSource()).buffer=e,M.connect(E),E.connect(w.destination);try{M.start(0)}catch(V){console.log("play sound error starting"),console.log(V),h=!1,t()}M.onended=function(){console.log("PLAY SOUND BYTES source ended"),h=!1,t()},M.onerror=function(){console.log("PLAY SOUND BYTES source error"),h=!1,t()}}),(function(e){console.log("PLAY SOUND BYTES decode FAIL"),console.log(e),h=!1,t()}))}else console.log("PLAY SOUND BYTES no bytes"),h=!1,t()}catch(V){console.log("PLAY SOUND BYTES err"),h=!1,console.log(V),t()}}))}function J(){m=!1,p.hasOwnProperty("microphoneStop")&&p.microphoneStop(),F()}return navigator&&navigator.mediaDevices&&(navigator.mediaDevices.enumerateDevices().then((function(t){_(t,e.site)})).catch(z),G()),{setVolume:D,muteVolume:B,unmuteVolume:F,playSound:q,stopPlaying:function(){console.log("STOP PLAY"),h=!1,M&&(console.log("STOP PLAY real"),M.stop()),S&&S.pause(),p.hasOwnProperty("stopPlaying")&&p.stopPlaying()},say:function(t){return W("hermod/"+e.site+"/tts/say",{text:t},"hermod/"+e.site+"/tts/finished")},stopAll:function(){Y(),J()},bind:function(e,t){p[e]=t},unbind:function(e){delete p[e]},startMicrophone:H,stopMicrophone:J,sendAndWaitFor:W,sendAudioAndWaitFor:function(e,t,n){return new Promise((function(o,a){l.subscribe(n),d[n]=function(){i.stop(),o()},i.start(l,e,t)}))},sendMessage:R,sendNLUMessage:function(e,t,n){n||(n=[]),l.publish("hermod/"+e+"/nlu/intent",JSON.stringify({intent:{name:t},entities:n}))},sendASRTextMessage:function(e,t){console.log("send text message "+e+t),l.publish("hermod/"+e+"/asr/text",JSON.stringify({text:t}))},authenticate:function(){},connect:I,disconnect:function(){p.hasOwnProperty("disconnect")&&p.disconnect(),l.end(),setTimeout((function(){I()}),3e3)},startHotword:L,stopHotword:Y}};e.exports=s;try{window&&(window.HermodWebClient=s)}catch(c){}}).call(this,n(22).Buffer)},494:function(e,t){},496:function(e,t){},574:function(e,t){},575:function(e,t){},579:function(e,t,n){var o=n(580),a=n(151),r=(a.Readable,a.Writable,n(232)),i=null;e.exports={start:function(e,t,a){var s=o(512,{flush:!0});s.on("data",(function(n){e.publish("hermod/"+t+"/microphone/audio",n)})),i=r.createReadStream(a),console.log("stream "+a);var c=new(n(591).Reader)({channels:1,sampleRate:16e3,bitDepth:16}),l=!1;c.on("format",(function(e){l=!0})),c.on("data",(function(e){l&&(console.log("read body"),console.log(e&&e.buffer?e.buffer.length:-1),s.write(e))})),i.pipe(c)},stop:function(e){!1,i&&(i.pause(),i.destroy())}}},582:function(e,t){},584:function(e,t){},600:function(e,t){},608:function(e,t,n){var o=n(609);PorcupineManager=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=function(a,r,i,s){(t=new Worker(e)).postMessage({command:"init",keywordIDs:a,sensitivities:r}),t.onmessage=function(e){i(e.data.keyword)},o.start([this],s,n)},r=function(){o.stop(),t.postMessage({command:"release"})},i=function(e){t.postMessage({command:"process",inputFrame:e})};return{start:a,processFrame:i,stop:r}};try{e.exports=PorcupineManager}catch(a){}try{window.PorcupineManager=PorcupineManager}catch(a){}},609:function(e,t,n){var o=n(610),a=n(611);WebVoiceProcessor=function(){var e=!1;return{start:function(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];navigator.mediaDevices.getUserMedia({audio:!0}).then((function(r){var s,c=new(window.AudioContext||window.webkitAudioContext),l=c.createMediaStreamSource(r),u=c.createScriptProcessor(4096,1,1);u.onaudioprocess=function(t){e&&s.postMessage({command:"process",inputFrame:t.inputBuffer.getChannelData(0)})},l.connect(u),u.connect(c.destination),(s=i?a(237):o(n(237))).postMessage({command:"init",inputSampleRate:l.context.sampleRate}),s.onmessage=function(e){t.forEach((function(t){t.processFrame(e.data)}))}})).catch(r),e=!0},stop:function(){e=!1,(void 0).postMessage({command:"reset"})}}}(),e.exports=WebVoiceProcessor;try{window.WebVoiceProcessor=WebVoiceProcessor}catch(r){}},612:function(e,t){var n={"Hey Edison":new Uint8Array([118,237,148,135,159,220,36,201,56,239,145,237,180,93,2,141,52,25,146,185,64,57,215,232,206,126,81,225,148,220,233,125,208,20,155,99,250,111,85,62,137,213,98,126,95,153,72,52,111,249,44,213,197,123,110,70,228,216,115,70,151,98,25,130,57,222,81,112,215,229,127,232,165,197,192,156,201,244,137,20,50,109,9,238,58,247,222,38,229,187,241,206,10,21,41,124,192,63,24,24,48,176,53,104,217,134,233,160,198,236,140,172,100,134,146,72,12,52,188,214,229,137,61,153,85,28,217,217,182,147,245,151,247,9,226,202,165,184,72,39,37,167,52,17,133,49,180,127,74,67,100,41,124,72,112,172,252,71,209,210,189,143,0,49,172,213,21,83,205,66,79,46,245,229,246,234,89,169,6,130,188,11,37,192,108,101,219,130,64,37,74,57,60,230,134,142,206,104,185,128,178,88,183,55,101,213,227,212,156,107,119,112,129,57,182,209,7,164,55,199,187,118,118,132,199,153,255,172,243,20,132,36,77,111,56,87,156,76,7,95,199,137,125,94,33,210,211,103,16,67,84,255,12,88,157,51,149,153,34,9,209,175,177,210,27,211,89,204,189,117,34,173,63,31,172,97,118,245,207,179,22,1,50,65,228,130,185,68,4,175,173,148,42,70,211,7,198,105,191,125,237,202,147,217,105,227,191,37,132,218,184,157,184,23,65,24,155,206,155,104,213,63,20,243,33,184,18,65,97,50,131,3,148,78,196,85,252,210,183,10,228,172,25,150,233,10,104,4,179,98,194,5,106,1,207,148,91,135,152,57,133,215,28,236,255,217,58,225,64,59,95,207,149,137,15,150,8,26,83,120,1,68,96,52,254,171,145,10,252,49,234,15,18,180,73,126,135,0,37,109,188,54,222,133,58,249,162,220,56,20,204,133,46,91,208,186,176,204,93,126,36,151,51,18,207,53,78,177,2,105,167,107,66,183,184,210,75,210,251,169,136,97,235,17,161,81,57,125,83,193,224,159,17,94,243,148,181,167,28,93,208,111,198,190,123,134,59,96,222,158,178,198,225,90,196,191,231,79,172,51,85,85,100,157,93,137,246,87,113,238,44,17,168,29,213,1,116,27,102,29,192,177,97,160,182,234,6,146,74,106,131,157,212,227,93,213,178,229,47,75,226,57,109,187,201,39,77,136,206,112,122,154,138,4,245,187,105,125,166,159,84,42,86,231,80,127,37,182,232,229,35,61,212,65,99,10,249,236,255,252,18,87,91,172,176,175,195,238,77,243,22,112,195,51,41,251,157,58,234,25,2,188,59,171,110,168,164,105,150,226,39,91,134,96,232,116,243,125,140,165,58,156,212,241,93,111,242,38,105,207,237,207,137,217,9,210,104,243,51,248,198,197,138,68,20,136,44,162,110,21,54,99,122,104,141,11,156,164,233,141,224,244,152,121,68,7,77,91,76,139,249,89,214,43,151,53,247,89,134,108,149,8,71,221,135,103,196,53,235,198,175,1,248,94,11,78,238,132,8,161,114,197,148,243,129,6,193,47,145,10,189,135,96,112,200,163,226,109,0,170,139,212,44,78,157,107,207,221,54,154,48,162,33,242,160,56,18,101,163,250,102,154,143,174,155,97,128,248,221,224,245,228,250,219,235,106,85,150,25,36,170,154,206,250,174,35,138,91,74,193,70,8,197,51,52,98,243,202,177,138,242,186,142,46,177,45,38,65,135,199,240,168,134,78,172,231,156,64,33,102,19,226,81,190,31,205,64,57,239,112,46,47,23,186,38,19,75,252,185,84,96,111,199,104,237,105,60,90,192,120,240,207,79,159,53,254,67,252,212,139,188,65,94,25,128,139,166,41,175,87,243,184,200,179,166,228,247,170,75,43,253,42,44,15,224,15,140,184,172,210,138,240,239,52,86,148,53,20,2,112,87,244,230,197,130,38,129,107,210,200,128,112,193,166,107,100,9,231,82,175,178,127,170,160,252,26,77,28,233,53,226,168,249,124,52,136,1,57,125,2,255,111,64,23,89,227,232,86,24,135,116,79,225,47,242,157,87,209,93,66,229,1,33,244,141,255,11,15,209,138,129,64,164,173,112,114,117,58,176,161,154,191,223,60,171,97,82,247,214,241,15,64,21,87,70,166,198,140,117,57,192,138,182,250,14,17,150,248,150,105,184,31,177,249,244,180,2,60,185,67,206,215,43,244,118,99,40,45,235,85,131,146,84,152,243,22,67,51,41,201,206,47,71,40,210,129,239,232,149,220,160,68,229,100,105,121,52,127,112,128,245,240,145,67,81,5,244,191,18,107,46,117,185,124,59,125,186,146,34,37,209,131,22,128,147,33,139,97,124,207,17,38,173,142,103,249,241,12,83,170,71,243,51,33,156,221,196,125,98,247,41,143,209,60,32,83,27,246,172,153,88,72,244,255,65,124,95,41,117,211,134,208,227,102,68,9,55,134,53,33,129,123,196,134,108,151,184,33,217,218,74,221,171,189,239,147,163,17,72,170,60,254,28,165,31,172,61,80,101,152,181,206,227,74,191,77,160,182,134,99,131,54,150,67,25,141,234,175,14,52,239,188,55,95,194,230,48,8,28,69,223,229,41,73,60,125,74,10,165,43,180,162,177,173,115,117,155,30,25,128,49,12,236,160,197,175,8,254,18,30,238,160,77,162,147,112,191,63,22,178,62,0,29,92,156,76,191,180,98,171,42,243,228,206,35,237,180,166,198,118,85,187,27,125,198,154,200,228,194,231,38,83,140,46,18,210,13,36,144,96,204,191,209,38,161,94,33,250,166,0,24,150,101,232,174,214,62,51,47,168,228,171,182,1,152,247,171,140,154,14,228,108,204,242,170,16,133,246,103,154,98,41,56,63,111,8,75,170,187,34,77,108,36,58,231,59,232,184,84,32,223,215,150,62,153,29,82,85,130,29,113,35,245,154,92,103,241,54,246,216,78,174,148,160,199,78,208,196,119,245,255,127,200,134,31,246,254,160,208,60,25,191,192,64,4,19,27,110,39,196,195,122,34,182,220,80,214,236,99,131,117,172,24,80,185,64,220,172,121,185,121,84,69,139,46,13,92,39,156,194,94,50,77,145,21,21,165,237,180,136,47,223,60,71,19,109,145,184,3,248,191,172,114,98,155,101,86,200,207,23,45,166,211,22,55,104,94,17,217,173,64,36,7,86,97,12,0,23,24,246,109,172,232,134,136,194,82,172,18,189,71,158,138,246,182,101,110,151,214,210,64,192,192,76,46,107,78,35,39,144,95,74,224,100,85,174,249,52,26,174,23,236,248,145,120,180,111,58,157,60,172,16,89,250,124,131,165,10,33,99,200,48,123,234,89,214,92,212,106,175,226,190,202,109,7,105,142,176,20,132,162,115,142,207,135,72,251,238,87,17,123,53,234,63,100,223,238,120,176,57,143,171,0,64,239,56,30,64,23,133,36,254,228,189,233,56,104,37,216,16,24,218,108,180,33,67,176,251,168,169,108,90,61,100,106,14,231,147,213,63,77,188,176,50,162,234,218,116,54,96,172,129,127,2,134,180,3,157,160,238,129,124,5,198,86,156,65,196,93,8,55,18,83,213,195,238,18,154,211,126,150,39,46,165,7,181,11,196,208,8,73,100,93,67,170,125,86,34,72,209,116,14,224,140,167,63,132,221,161,252,2,219,50,160,28,146,110,192,105,90,69,91,183,115,55,213,161,64,95,243,87,7,164,87,69,179,61,18,71,44,92,188,224,49,146,218,182,41,90,211,101,213,212,103,208,38,106,118,12,92,180,31,97,211,0,169,206,29,233,61,126,190,146,198,160,225,119,88,7,199,49,150,86,105,73,52,246,189,66,19,134,228,18,86,174,11,178,241,229,246,186,194,207,168,228,34,134,221,42,134,238,124,197,30,63,12,233,60,98,195,151,198,64,168,83,130,207,220,136,66,183,118,126,108,193,3,246,249,26,147,96,68,177,80,227,158,167,0,46,115,136,53,142,94,219,223,99,165,34,80,26,49,45,40,230,241,190,228,77,5,96,1,99,88,113,82,17,17,241,159,231,72,29,103,195,90,80,53,233,78,207,218,39,4,149,96,214,90,194,50,248,0,41,91,70,172,154,34,214,147,227,26,162,234,86,74,184,240,8,80,23,204,158,244,128,92,18,202,135,35,3,49,222,99,24,68,146,127,255,251,178,104,187,85,15,198,104,204,205,218,88,91,42,157,89,142,76,128,147,110,247,96,65,113,19,78,65,95,218,127,234,57,28,197,6,121,254,71,192,71,47,94,100,75,145,130,144,225,23,149,93,235,13,147,129,188,122,149,126,217,103,198,248,239,23,138,100,141,20,82,176,58,172,206,234,118,213,216,193,100,132,186,255,102,11,20,228,19,135,161,110,56,25,40,230,71,124,106,197,168,4,211,36,97,34,242,40,11,252,36,5,145,230,5,72,46,193,195,236,165,108,191,3,68,55,22,11,86,215,170,33,174,4,28,205,139,246,227,171,70,101,59,113,150,152,10,206,149,199,143,106,27,250,11,111,234,172,131,9,25,214,105,11,91,254,19,133,129,239,179,14,121,86,78,68,95,75,45,24,10,185,23,93,81,178,115,236,223,152,76,2,42,161,61,253,137,222,82,78,94,124,138,178,49,203,32,234,125,96,97,31,29,146,193,230,103,169,16,26,176,161,140,236,44,199,242,107,37,167,244,65,239,185,52,108,125,124,229,193,176,165,17,148,206,31,171,57,135,247,22,177,44,11,66,99,48,68,13,70,187,138,45,219,129,3,85,28,157,241,250,231,136,212,206,152,123,252,14,19,111,16,220,88,27,66,244,137,208,131,220,155,151,254,96,166,171,255,251,53,207,32,54,202,69,172,192,159,39,26,139,97,53,13,50,23,61,230,139,69,130,76,240,185,223,73,110,47,47,212,133,192,219,207,145,96,32,35,29,186,176,179,113,220,88,58,171,37,14,23,82,43,236,249,204,194,34,38,0,227,176,83,196,122,66,171,106,14,116,104,203,110,178,248,93,44,183,192,50,4,236,35,184,221,24,106,152,113,19,89,75,182,76,12,251,76,18,42,160,35,182,148,29,184,32,148,13,30,109,105,65,36,60,131,245,27,116,61,54,252,244,145,217,215,138,41,205,110,156,2,192,199,125,98,21,168,128,246,90,138,42,94,180,6,26,241,15,224,141,231,197,103,57,199,176,247,12,244,240,228,95,7,59,29,206,68,201,73,253,40,168,97,52,84,116,114,241,32,39,85,52,254,13,47,231,223,30,201,84,14,6,226,218,66,194,20,43,103,174,91,49,127,89,10,115,222,198,250,231,172,136,14,96,169,66,165,202,108,64,21,7,255,229,35,2,14,151,32,0,23,5,30,147,100,149,121,52,27,140,48,206,197,94,147,22,6,65,129,74,116,214,46,236,96,23,144,151,62,48,72,158,185,103,184,240,193,221,151,113,207,72,208,235,78,36,196,103,108,202,149,81,33,13,118,211,129,125,142,232,255,221,195,9,214,171,38,196,72,233,252,105,12,67,161,242,53,202,90,191,26,189,234,70,34,153,117,101,43,206,22,115,217,245,64,43,126,60,148,228,121,253,94,185,154,153,221,88,78,226,207,45,54,66,38,21,89,251,212,225,183,90,81,227,204,127,95,204,143,198,78,132,162,215,219,117,225,76,177,13,103,18,17,72,13,51,107,255,252,218,216,237,55,254,126,65,11,115,142,16,47,7,42,227,220,249,152,79,213,190,161,214,74,119,59,34,204,212,87,198,44,2,218,77,248,202,33,33,198,85,45,246,69,219,117,168,250,254,244,89,79,241,11,105,109,55,254,146,35,87,133,49,174,68,107,215,159,40,140,76,208,201,202,248,142,27,39,130,29,239,245,179,241,143,40,113,222,184,28,250,42,233,138,64,109,146,132,142,99,66,4,36,23,24,178,128,228,190,88,106,180,245,21,30,27,8,197,63,166,223,217,201,70,218,243,18,205,199,2,58,222,69,230,238,222,54,58,140,200,251,58,165,26,51,129,225,158,85,250,107,211,133,54,146,214,131,134,157,111,238,255,166,39,237,77,232,63,52,189,69,50,90,171,153,2,153,12,163,255,121,175,101,34,86,119,172,73,175,186,23,171,214,21,65,243,134,120,95,189,92,94,52,65,126,50,79,168,164,202,227,59,109,28,37,121,208,253,194,96,47,14,34,95,65,67,180,252,246,58,163,117,186,230,248,30,246,55,101,193,136,183,168,183,199,59,117,41,33,199,237,64,14,201,215,221,157,176,46,235,27,255,242,31,35,243,213,100,226,137,107,107,88,251,208,187,181,91,43,99,79,179,108,140,63,176,138,82,10,160,200,118,89,166,10,225,224,209,215,108,119,51,237,85,16,136,107,239,7,149,199,219,30,6,75,94,228,216,153,179,36,226,33,25,118,208,60,45,138,168,190,127,83,88,168,86,234,30,112,127,28,142,247,202,245,185,203,47,117,148,81,113,120,16,38,7,229,246,58,40,114,56,135,35,198,110,45,0,149,34,178,169,61,42,95,50,128,98,94,53,59,55,41,0,60,6,17,164,142,196,235,222,91,187,214,136,164,51,232,57,234,202,199,105,137,134,185,69,3,81,211,132,65,255,175,47,109,18,51,72,123,40,64,177,54,174,163,187,108,208,173,137,124,245,168,195,221,169,88,46,3,133,157,165,203,162,105,150,46,38,153,113,201,22,254,183,17,183,94,119,192,99,150,130,240,198,132,249,46,78,165,5,193,6,152,165,28,164,91,165,58,47,62,200,57,14,5,106,129,85,135,190,239])};e.exports=n},613:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(238),i=n.n(r),s=(n(160),n(12)),c=n(13),l=n(15),u=n(14),m=(n(161),n(258),n(23)),h=n(252),d=n(17),p=function(e){var t=e.component,n=Object(h.a)(e,["component"]);return a.a.createElement(d.b,Object.assign({},n,{render:function(e){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var r=Object.assign.apply(Object,[{}].concat(n));return a.a.createElement(e,r)}(t,e,n)}}))},g=n(614),f=n(239),v=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(s.a)(this,n),(o=t.call(this,e)).handlePageChange=function(e){o.setState({currentPage:e})},o.getPagesNumbers=function(){return[].concat([])},o.state={currentPage:null},o}return Object(c.a)(n,[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(f.a,{pageOnChange:this.handlePageChange,customPageNumber:this.state.currentPage,containerWidth:window.innerWidth,containerHeight:.8*window.innerHeight},this.props.children))}}]),n}(a.a.Component),b=n(241),y=n.n(b),w=function(e){e.children;return a.a.createElement("div",{className:"component"},a.a.createElement("header",{className:"App-header"},a.a.createElement("img",{src:y.a,className:"App-logo",alt:"logo"}),a.a.createElement("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer"},"Learn React")))},E=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"component"},a.a.createElement("h2",{style:{clear:"both"}},"Hi, I'm Edison"),a.a.createElement("div",null,"Say ",a.a.createElement("b",null,'"Hey Edison"')," or click on the microphone to trigger me,  then ask a question. I turn ",a.a.createElement("b",null,"Green")," when I'm listening. "),a.a.createElement("div",null,"Ask me a question and I'll do my best to answer. Click or say the examples below."),a.a.createElement("div",{style:{marginTop:"0.5em",clear:"both"},className:"helpSampleButtons"},a.a.createElement(g.a,{variant:"primary",onClick:function(t){e.props.sendMessage(t.target.innerText)}},"What's the date"),a.a.createElement(g.a,{variant:"primary",onClick:function(t){e.props.sendMessage(t.target.innerText)}},'Define the word "colloquial"'),a.a.createElement(g.a,{variant:"primary",onClick:function(t){e.props.sendMessage(t.target.innerText)}},"Tell me about celery")),a.a.createElement("div",{style:{marginTop:"0.5em",clear:"both"},className:"helpSampleButtons"},a.a.createElement(g.a,{variant:"primary",onClick:function(t){e.props.sendMessage(t.target.innerText)}},"What's the capital of Australia"),a.a.createElement(g.a,{variant:"primary",onClick:function(t){e.props.sendMessage(t.target.innerText)}},'Spell the word "fuzy"'),a.a.createElement(g.a,{variant:"primary",onClick:function(t){e.props.sendMessage(t.target.innerText)}},"Search youtube for funny cats"),a.a.createElement(g.a,{variant:"primary",onClick:function(t){e.props.sendMessage(t.target.innerText)}},"Show me a picture of a motorbike"),a.a.createElement(g.a,{variant:"primary",onClick:function(t){e.props.sendMessage(t.target.innerText)}},"What are some synonyms for weak")),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("div",{style:{marginTop:"0.5em",clear:"both"}},"With all that information at hand, lets see if you can solve a crossword"),a.a.createElement("div",{className:"helpSampleButtons"},a.a.createElement(m.b,{to:"/crossword"},a.a.createElement(g.a,{variant:"success",size:"lg"},"Start a crossword"))))}}]),n}(o.Component),S=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"component"},a.a.createElement("h2",{style:{clear:"both"}},"What can I say ?"),a.a.createElement("div",{style:{marginTop:"4em",clear:"both"}},"As we chat I'll suggest some follow up questions in the top menu."),a.a.createElement("div",{className:"helpSampleButtons"},a.a.createElement(g.a,{variant:"secondary"},"And what's the population"),a.a.createElement(g.a,{variant:"secondary"},"Tell me more")),a.a.createElement("br",null),a.a.createElement("br",null))}}]),n}(o.Component),O=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"component homePageComponent"},a.a.createElement(v,null,a.a.createElement(E,{sendMessage:this.props.sendMessage}),a.a.createElement(S,{sendMessage:this.props.sendMessage}),a.a.createElement(w,null)))}}]),n}(o.Component),k=n(243),C=n.n(k),M={across:{1:{clue:"capital of australia",answer:"canberra",row:0,col:0},2:{clue:"capital of el salvador",answer:"sansalvador",row:2,col:1},3:{clue:"capital of ecuador",answer:"quito",row:5,col:6},4:{clue:"capital of iraq",answer:"baghdad",row:7,col:0},5:{clue:"capital of portugal",answer:"lisbon",row:9,col:4},6:{clue:"capital of vietnam",answer:"hanoi",row:10,col:0}},down:{1:{clue:"capital of the netherlands",answer:"amsterdam",row:0,col:1},2:{clue:"capital of thailand",answer:"bangkok",row:0,col:3},3:{clue:"capital of liechtenstein",answer:"vaduz",row:2,col:7},4:{clue:"capital of russia",answer:"moscow",row:1,col:10},5:{clue:"capital of east timor",answer:"dili",row:7,col:4}}},P=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"component first-component"},a.a.createElement("div",{className:"content-block"},a.a.createElement(C.a,{data:M}),";"))}}]),n}(o.Component),j=n(34),A=n(247),x=n.n(A),N=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e="",t="";this.props.hermodClient.isPlaying?(e="green",t="lightblue"):(e="black",t="grey",1===this.props.hermodClient.microphoneState?(e="green",t="grey"):2===this.props.hermodClient.microphoneState?(e="red",t="pink"):3===this.props.hermodClient.microphoneState&&(e="green",t="green"));var n={position:"fixed",top:"0.5em",right:"0.5em",fontSize:"1.2em",backgroundColor:t,border:"2px solid "+e,borderRadius:"2em",height:"4em",width:"4em",textDecoration:"none",outline:"none"},o=a.a.createElement("svg",{style:{position:"fixed",top:"0.9em",right:"0.9em",height:"3.1em",width:"3.1em",padding:"0.3em",zIndex:60},"aria-hidden":"true",id:"micImage",focusable:"false","data-prefix":"fas","data-icon":"microphone",className:"microphoneImage",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512"},a.a.createElement("path",{fill:"currentColor",d:"M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z"}));return a.a.createElement("button",{id:"microphoneButton",onClick:this.props.toggleMicrophone,style:n},a.a.createElement("div",null,this.props.hermodClient.isWaiting&&a.a.createElement("img",{style:{position:"fixed",top:"0.8em",right:"0.8em",height:"3.2em",opacity:.2,zIndex:50},alt:"microphone",id:"waitingOverlay",src:x.a}),o))}}]),n}(o.Component),T=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=!1;return this.props.hermodClient.transcript&&this.props.hermodClient.transcript.length>0&&(e=!0),a.a.createElement("div",{style:{position:"fixed",top:"4em",right:"8em",minWidth:"15em"},className:"speechBubbleComponent"},e&&a.a.createElement("div",{style:{position:"relative",background:"#38cedc",borderRadius:".4em",minHeight:"3em",width:"100%",padding:"0.5em",textDecoration:"none",textAlign:"left"},id:"speechbubble",className:"speech-bubble"},a.a.createElement("div",{style:{fontWeight:"bold"}},this.props.hermodClient.transcript),this.props.hermodClient.nlu&&a.a.createElement("div",null,a.a.createElement("i",null,this.props.hermodClient.nlu)),this.props.hermodClient.say&&a.a.createElement("div",null,this.props.hermodClient.say)))}}]),n}(o.Component);var I=function(e){console.log(e);var t=[],n=0,o=function(t){e.sendMessage(t.target.getAttribute("data-frame"))},r=function(t){e.showFrame(t.target.getAttribute("data-frame"))},i=function(t){e.showWindow(t.target.getAttribute("data-url"))};for(n in e.buttons)e.buttons[n].text?t.push(a.a.createElement(g.a,{key:n,variant:"primary","data-message":e.buttons[n].text,onClick:o},e.buttons[n].label?e.buttons[n].label:e.buttons[n].text)):e.buttons[n].frame?t.push(a.a.createElement(g.a,{key:n,variant:"primary","data-frame":e.buttons[n].frame,onClick:r},e.buttons[n].label)):e.buttons[n].url&&t.push(a.a.createElement(g.a,{key:n,variant:"primary","data-url":e.buttons[n].url,onClick:i},e.buttons[n].label));return a.a.createElement("span",{style:{float:"left",marginRight:"0.5em",padding:"0.5em"},className:"dynamicButtons",id:"dynamicButtons"},t)},R=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(c.a)(n,[{key:"render",value:function(){return[]}}]),n}(o.Component),U=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(s.a)(this,n),(o=t.call(this,e)).sendForm=o.sendForm.bind(Object(j.a)(o)),o}return Object(c.a)(n,[{key:"sendForm",value:function(e){console.log("SEMD FORM");return e.preventDefault(),this.props.sendMessage(this.props.hermodClient.question),!1}},{key:"render",value:function(){return a.a.createElement("div",{className:"hermodHeader",style:{backgroundColor:"#2b30d23b",minHeight:"9em",width:"100%",top:0,left:0,position:"fixed"}},a.a.createElement(N,{hermodClient:this.props.hermodClient,toggleMicrophone:this.props.toggleMicrophone}),a.a.createElement(T,{hermodClient:this.props.hermodClient}),a.a.createElement("div",{id:"buttons",style:{float:"left",marginRight:"0.5em",padding:"0.5em"}},a.a.createElement("span",{className:"fixedButtons",id:"fixedButtons",style:{float:"left",marginRight:"0.5em"}},a.a.createElement(m.b,{to:"/"},a.a.createElement(g.a,{style:{float:"left"},variant:"primary",size:"lg"},"Home"))),a.a.createElement(I,{buttons:this.props.hermodClient.buttons,sendMessage:this.props.sendMessage,showFrame:this.props.showFrame,showWindow:this.props.showWindow})),a.a.createElement("div",{style:{float:"left",marginLeft:"0.5em",marginRight:"0.5em",clear:"both",width:"90%"}},a.a.createElement("form",{onSubmit:this.sendForm},a.a.createElement("input",{style:{fontSize:"1.8em",width:"100%"},id:"text_input",type:"text",value:this.props.hermodClient.question,onChange:this.props.setQuestion,placeholder:"Type your question here"}))),a.a.createElement("div",{style:{float:"left",marginLeft:"0.5em",marginRight:"0.5em",clear:"both",width:"90%"}},a.a.createElement(R,{intents:[],entities:[]})))}}]),n}(o.Component),W=(n(470),function(e){return a.a.createElement("div",{className:"hermodFooter",style:{overflowY:"scroll",backgroundColor:"rgba(137, 140, 224, 0.81)",textAlign:"left",borderTop:"1px solid black",height:"6.7em",width:"100%",position:"fixed",left:0,bottom:0}},a.a.createElement(m.b,{style:{float:"right",marginRight:"0.8em"},to:"/about"},a.a.createElement(g.a,{style:{float:"left"},variant:"primary",size:"sm"},"About the Software  ")),a.a.createElement("b",{style:{float:"left",marginRight:"0.8em"}},"\xa0\xa0",a.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://github.com/syntithenai/hermod"},"Copyleft Steve Ryan"),"\xa0\xa0"),a.a.createElement("span",{style:{float:"left",marginLeft:"1.8em",color:"#e64848"}},"\xa0\xa0",a.a.createElement("b",null,a.a.createElement("i",null,"WARNING: Your questions are used to improve our language models."))),a.a.createElement("div",null,JSON.stringify(e.hermodClient)))}),D={left:0,top:0,overflowY:"hidden",width:"100%",height:"100%",overflow:"hidden",border:"None"},B=function(e){return e.hermodClient.frame&&e.hermodClient.frame.length>0?a.a.createElement("div",{className:"component iframeComponent",style:{height:"90em"}},a.a.createElement("iframe",{title:"Wikipedia",style:D,src:e.hermodClient.frame})):a.a.createElement(d.a,{to:"/"})},F=n(248),L={height:"600",playerVars:{autoplay:1}};function Y(e){}var G=function(e){return e.hermodClient.youtube&&e.hermodClient.youtube.length>0?a.a.createElement("div",{className:"component youtubeComponent"},a.a.createElement(F.a,{videoId:e.hermodClient.youtube,opts:L,onReady:Y})):a.a.createElement(d.a,{to:"/"})},H=function(){return a.a.createElement("div",{className:"component first-component",style:{textAlign:"left",marginLeft:"1em"}},a.a.createElement("h2",null,"About This Software"),a.a.createElement("div",null,"This software is a demonstration for Hermod, a suite of tools for building applications with voice."),a.a.createElement("br",null),a.a.createElement("div",null,"The software is freely available under a FreeBSD Open Source License.",a.a.createElement("br",null)),a.a.createElement("a",{href:"https://github.com/syntithenai/hermod"},"Github"),a.a.createElement("br",null),a.a.createElement("div",null,"Built using",a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("a",{href:"https://github.com/mozilla/DeepSpeech"},"Deepspeech Voice Recognition")),a.a.createElement("li",null,a.a.createElement("a",{href:"https://picovoice.ai/"},"Picovoice Hotword Recognition")),a.a.createElement("li",null,a.a.createElement("a",{href:"https://rasa.com/docs/rasa/nlu/about/"},"RASA")),a.a.createElement("li",null,"and many other open source projects"))),a.a.createElement("div",null,"Help improve Deepspeech",a.a.createElement("br",null),a.a.createElement("a",{href:"https://voice.mozilla.org/en/speak"},"Contribute your voice to the Mozilla Open Source Voice Dataset")))},_=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){if(this.props.images&&this.props.images.length>0){for(var e=[],t=0;t<this.props.images.length;t++)e.push(a.a.createElement("img",{key:t,src:this.props.images[t],style:{width:"90%"}}));return a.a.createElement("div",{className:"images-list"},e)}return a.a.createElement(d.a,{to:"/"})}}]),n}(o.Component),z=n(251),q=function(e){console.log(e)};var J=function(){return a.a.createElement("div",{className:"Login"},a.a.createElement(z.GoogleLogin,{clientId:"589552091078-p6ccsnt8kchep5r46t9hfuti328fofjr.apps.googleusercontent.com",buttonText:"Login",onSuccess:q,onFailure:q,cookiePolicy:"single_host_origin"}))},V=n(116),Q=(n(482),n(483)),K=Object(d.f)(function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(s.a)(this,n),(o=t.call(this,e)).state={isListening:!1,isSpeaking:!1,isPlaying:!1,microphoneState:0,slots:[],transcript:"",nlu:"",say:"",isWaiting:!1,question:"",frame:"",images:[],image:"",buttons:[]},o.useAnalytics=!1,o.toggleMicrophone=o.toggleMicrophone.bind(Object(j.a)(o)),o.setQuestion=o.setQuestion.bind(Object(j.a)(o)),o.initClient=o.initClient.bind(Object(j.a)(o)),o.sendMessage=o.sendMessage.bind(Object(j.a)(o)),o.showFrame=o.showFrame.bind(Object(j.a)(o)),o.showWindow=o.showWindow.bind(Object(j.a)(o)),o.analyticsEvent=o.analyticsEvent.bind(Object(j.a)(o)),console.log("hc constr"),console.log(o.props.history),o}return Object(c.a)(n,[{key:"initClient",value:function(){var e=this;fetch("/config").then((function(e){return e.json()})).then((function(t){var n="ws://";"https:"===window.location.protocol&&(n="wss://"),t.server||(t.server=n+window.location.hostname+":9001"),e.setState({config:t});var o=null;console.log(["GOT CONFIG",t]),t.analytics_code&&t.analytics_code.length>0&&(console.log("INIT ANALYTICS "+t.analytics_code),e.useAnalytics=!0,V.a.initialize(t.analytics_code),V.a.pageview(window.location.pathname+window.location.search)),t.javascript_environment="react",e.client=new Q(t),e.client.bind("hotwordDetected",(function(){})),e.client.bind("microphoneStart",(function(){e.setState({microphoneState:3})})),e.client.bind("hotwordStart",(function(){e.setState({microphoneState:2})})),e.client.bind("hotwordStop",(function(){e.setState({microphoneState:1})})),e.client.bind("microphoneStop",(function(){e.setState({microphoneState:2})})),e.client.bind("disconnect",(function(){e.setState({microphoneState:0})})),e.client.bind("reconnect",(function(){e.setState({microphoneState:0})})),e.client.bind("connect",(function(){e.setState({microphoneState:1})})),e.client.bind("startSpeaking",(function(){console.log("START SPEAKING"),e.setState({isSpeaking:!0})})),e.client.bind("stopSpeaking",(function(){console.log("STOP SPEAKING"),e.setState({isSpeaking:!1})})),e.client.bind("startPlaying",(function(){console.log("START PLAYING"),e.setState({isPlaying:!0})})),e.client.bind("stopPlaying",(function(){console.log("STOP PLAYING"),e.setState({isPlaying:!1})})),e.client.bind("message",(function(t,n){var a=t.split("/"),r={};function i(e){var t={};try{t=JSON.parse(e.toString())}catch(n){}return t}if(a.length>3&&"display"===a[2]&&"show"===a[3])(r=i(n)).url&&r.url.length>0&&e.client.showUrl(r.url),r.frame&&r.frame.length>0&&e.showFrame(r.frame),r.youtube&&r.youtube.length>0&&e.showYoutube(r.youtube),r.image&&r.image.length>0&&e.showImages([r.image]),r.images&&r.images.length>0&&e.showImages(r.images),r.buttons&&r.buttons.length>0&&e.setState({buttons:r.buttons}),r.question&&r.question.length>0&&e.setState({question:r.question});else if(a.length>3&&"dialog"===a[2]&&"slots"===a[3])r=i(n),e.setState({slots:r.slots});else if(a.length>3&&"asr"===a[2]&&"text"===a[3])r=i(n),e.setState({transcript:r.text,nlu:"",say:""}),o&&clearTimeout(o),o=setTimeout((function(){e.setState({transcript:""})}),3e3);else if(a.length>3&&"nlu"===a[2]&&"intent"===a[3]){var s=(r=i(n)).intent&&r.intent.name?r.intent.name:"",c={};if(s.length>0&&r.entities){for(var l in r.entities){var u=r.entities[l];console.log(u),u.entity&&u.entity.length>0&&u.value&&u.value.length>0&&(c[u.entity]=u.value)}e.setState({nlu:s+JSON.stringify(c),buttons:[]}),e.analyticsEvent(s+JSON.stringify(c))}}else a.length>2&&"tts"===a[2]&&"say"===a[3]?(r=i(n),console.log("say text "+r.text),e.setState({say:r.text})):a.length>3&&"display"===a[2]&&"startwaiting"===a[3]?e.setState({isWaiting:!0}):a.length>3&&"display"===a[2]&&"stopwaiting"===a[3]&&e.setState({isWaiting:!1})})),e.client.connect()})).catch((function(e){console.log("parsing failed",e)}))}},{key:"componentDidMount",value:function(){console.log("APP MOUNT"),this.initClient()}},{key:"toggleMicrophone",value:function(){var e=this.state.microphoneState;this.state.isPlaying?this.client.stopPlaying():1===e?(this.client.stopMicrophone(),this.client.stopHotword(),this.client.sendMessage("hermod/"+this.state.config.site+"/dialog/end",{})):2===e?(this.client.stopHotword(),this.client.startMicrophone(),this.client.sendMessage("hermod/"+this.state.config.site+"/hotword/detected",{})):3===e&&(this.client.stopMicrophone(),this.client.stopHotword(),this.client.sendMessage("hermod/"+this.state.config.site+"/dialog/end",{}))}},{key:"setQuestion",value:function(e){this.setState({question:e.target.value})}},{key:"analyticsEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Navigation";this.useAnalytics&&(console.log(["ANALYTICS CURRENTPAGE",e]),V.a.event({category:t,action:e}))}},{key:"sendMessage",value:function(e){console.log("SNED MESSAGE "+e),this.client.sendASRTextMessage(this.state.config.site,e)}},{key:"showFrame",value:function(e){this.setState({frame:e}),this.props.history.push("/frame")}},{key:"showYoutube",value:function(e){this.setState({youtube:e}),this.props.history.push("/youtube")}},{key:"showImages",value:function(e){this.setState({images:e}),this.props.history.push("/images")}},{key:"showWindow",value:function(e){console.log("show window "+e);var t=null;t&&t.close(),t=window.open(e)}},{key:"render",value:function(){var e={toggleMicrophone:this.toggleMicrophone,setQuestion:this.setQuestion,client:this.client,sendMessage:this.sendMessage,showFrame:this.showFrame,showWindow:this.showWindow};return a.a.createElement("div",{className:"HermodClient"},this.props.children(this.state,e))}}]),n}(o.Component)),$=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){console.log("APP dMOUNT")}},{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement(m.a,null,a.a.createElement(K,null,(function(e,t){return a.a.createElement("div",null,a.a.createElement(p,{path:"/",hermodClient:e,component:U,showFrame:t.showFrame,showWindow:t.showWindow,sendMessage:t.sendMessage,toggleMicrophone:t.toggleMicrophone,setQuestion:t.setQuestion}),a.a.createElement("div",{style:{marginTop:"9em"}},a.a.createElement(p,{exact:!0,path:"/",hermodClient:e,component:O,sendMessage:t.sendMessage}),a.a.createElement(p,{exact:!0,path:"/home",hermodClient:e,component:O,sendMessage:t.sendMessage}),a.a.createElement(p,{exact:!0,path:"/crossword",hermodClient:e,component:P}),a.a.createElement(p,{exact:!0,path:"/frame",hermodClient:e,component:B}),a.a.createElement(p,{exact:!0,path:"/youtube",hermodClient:e,component:G}),a.a.createElement(p,{exact:!0,path:"/about",hermodClient:e,component:H}),a.a.createElement(p,{exact:!0,path:"/login",hermodClient:e,component:J}),a.a.createElement(p,{exact:!0,path:"/images",images:e.images,component:_})),a.a.createElement(W,{adsenseClient:e.adsenseClient,adsenseSlot:e.adsenseSlot}))}))))}}]),n}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[253,1,2]]]);
//# sourceMappingURL=main.5435dcd7.chunk.js.map